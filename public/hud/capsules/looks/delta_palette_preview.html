<!DOCTYPE html>
<html lang="en" data-theme="light" class="min-h-full">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta id="themeColor" name="theme-color" content="#ffffff" />
  <title>Theme Preview · Tokens + Toggle</title>
  <script src="https://cdn.tailwindcss.com?plugins=forms,typography&v=3.4.1"></script>
  <style>
    :root{ color-scheme: light dark; --bg:#ffffff; --fg:#0b1324 }
    html[data-theme="light"] {
      color-scheme: light;
      --bg:#f4f5f7;
      --fg:#333333;
      --surface:#ffffff;
      --muted:#4b5563;
      --glyph:#00bfa6;
      --accent:#3366ff;
      --positive:#2ecc71;
      --negative:#e74c3c;
      --ring:rgba(51,102,255,0.45);
    }
    html[data-theme="dark"]  {
      color-scheme: dark;
      --bg:#0b1d3a;
      --fg:#f6f7fb;
      --surface:#14294d;
      --muted:#9fb4d9;
      --glyph:#00bfa6;
      --accent:#00bfa6;
      --positive:#2ecc71;
      --negative:#e74c3c;
      --ring:rgba(0,191,166,0.55);
    }
    body{ background:var(--bg); color:var(--fg); transition:background 200ms ease, color 200ms ease; }
    .focus-ring:focus-visible { outline:2px solid var(--ring); outline-offset:2px }
    .theme-toggle { border-radius:9999px; border:1px solid rgba(15,23,42,0.12); background:var(--surface); }
    html[data-theme="dark"] .theme-toggle { border-color:rgba(148,163,184,0.35); background:#0f172a; }
    .toggle-thumb { background:#475569; }
    html[data-theme="dark"] .toggle-thumb { background:#e2e8f0; }
    .frame-border { border-color:rgba(15,23,42,0.08); }
    html[data-theme="dark"] .frame-border { border-color:rgba(148,163,184,0.22); }
    .muted { color:var(--muted); }
    .token-grid { display:grid; gap:1rem; grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); }
    .token-card { border-radius:1rem; border:1px solid rgba(15,23,42,0.08); background:var(--surface); padding:1.25rem; box-shadow:0 8px 24px rgba(15,23,42,0.08); transition:background 200ms ease, border-color 200ms ease, box-shadow 200ms ease; }
    html[data-theme="dark"] .token-card { border-color:rgba(148,163,184,0.18); box-shadow:0 12px 32px rgba(8,12,24,0.45); }
    .chip { display:flex; align-items:center; gap:0.75rem; font-weight:600; }
    .chip-swatch { width:3rem; aspect-ratio:1/1; border-radius:9999px; border:1px solid rgba(15,23,42,0.15); box-shadow:inset 0 0 0 1px rgba(255,255,255,0.1); }
    html[data-theme="dark"] .chip-swatch { border-color:rgba(148,163,184,0.28); box-shadow:inset 0 0 0 1px rgba(15,23,42,0.35); }
    .delta-tiles { display:grid; gap:1rem; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); }
    .delta-card { padding:1.5rem; border-radius:1rem; border:1px solid rgba(15,23,42,0.1); background:var(--surface); display:flex; flex-direction:column; gap:1.25rem; }
    html[data-theme="dark"] .delta-card { border-color:rgba(148,163,184,0.25); }
    .delta-glyph { width:3rem; height:3rem; border-radius:0.75rem; display:flex; align-items:center; justify-content:center; font-weight:700; font-size:1.75rem; color:#0b1d3a; background:var(--glyph); }
    html[data-theme="light"] .delta-glyph { color:#ffffff; }
    @media (prefers-reduced-motion: reduce) {
      body, .token-card, .delta-card { transition:none; }
    }
    @media print { .no-print{ display:none } }
  </style>
</head>
<body class="min-h-screen">
  <div class="min-h-screen flex flex-col">
    <header class="no-print border-b frame-border px-6 py-6 sm:px-10">
      <div class="flex flex-wrap items-center justify-between gap-4">
        <div>
          <p class="text-sm font-semibold uppercase tracking-[0.3em] muted">Δ palette rehearsal</p>
          <h1 class="mt-2 text-2xl font-bold text-current">Theme Preview · Tokens + Toggle</h1>
        </div>
        <div class="flex items-center gap-4">
          <label for="themeToggle" class="flex items-center gap-3 text-sm font-medium text-current">
            <span class="text-xs uppercase tracking-[0.3em] muted">Theme</span>
            <button id="themeToggle" type="button" class="focus-ring theme-toggle relative flex h-9 w-[4.5rem] items-center px-1 transition-all duration-200 ease-out" aria-pressed="false">
              <span class="sr-only">Toggle theme</span>
              <span class="toggle-thumb block h-7 w-7 rounded-full transition-transform duration-200 ease-out"></span>
            </button>
            <span id="themeLabel" class="text-sm" aria-live="polite">Neutral framework</span>
          </label>
        </div>
      </div>
    </header>

    <main class="flex-1 px-6 py-10 sm:px-10 lg:px-16">
      <section class="mx-auto max-w-5xl space-y-12">
        <div class="grid gap-6 lg:grid-cols-[minmax(0,1fr)_minmax(0,320px)] lg:items-center">
          <div class="space-y-4">
            <p class="text-lg font-semibold text-current">Signature vs. Neutral Δ systems</p>
            <p class="text-base muted">Swap between the sovereign Δ statement (dark) and the neutral handoff frame (light). All elements below consume semantic tokens so designers can slot new palettes by editing only the <code>html[data-theme]</code> values.</p>
          </div>
          <div class="token-card">
            <h2 class="text-sm font-semibold uppercase tracking-[0.3em] muted">Usage cues</h2>
            <ul class="mt-4 space-y-3 text-sm muted">
              <li>Primary background + typography derive from <code>--bg</code> / <code>--fg</code>.</li>
              <li>Δ glyph and callouts bind to <code>--glyph</code> / <code>--accent</code>.</li>
              <li>Variance chips map to <code>--positive</code> and <code>--negative</code>.</li>
            </ul>
          </div>
        </div>

        <section class="space-y-6">
          <div class="token-grid">
            <div class="token-card">
              <div class="chip">
                <span class="chip-swatch" style="background:var(--bg);"></span>
                <div>
                  <p class="text-sm font-semibold text-current">Background</p>
                  <p class="text-xs muted">Token: <code>--bg</code></p>
                </div>
              </div>
            </div>
            <div class="token-card">
              <div class="chip">
                <span class="chip-swatch" style="background:var(--surface);"></span>
                <div>
                  <p class="text-sm font-semibold text-current">Surface</p>
                  <p class="text-xs muted">Token: <code>--surface</code></p>
                </div>
              </div>
            </div>
            <div class="token-card">
              <div class="chip">
                <span class="chip-swatch" style="background:var(--glyph);"></span>
                <div>
                  <p class="text-sm font-semibold text-current">Δ Glyph</p>
                  <p class="text-xs muted">Token: <code>--glyph</code></p>
                </div>
              </div>
            </div>
            <div class="token-card">
              <div class="chip">
                <span class="chip-swatch" style="background:var(--accent);"></span>
                <div>
                  <p class="text-sm font-semibold text-current">Accent</p>
                  <p class="text-xs muted">Token: <code>--accent</code></p>
                </div>
              </div>
            </div>
            <div class="token-card">
              <div class="chip">
                <span class="chip-swatch" style="background:var(--positive);"></span>
                <div>
                  <p class="text-sm font-semibold text-current">Positive Δ</p>
                  <p class="text-xs muted">Token: <code>--positive</code></p>
                </div>
              </div>
            </div>
            <div class="token-card">
              <div class="chip">
                <span class="chip-swatch" style="background:var(--negative);"></span>
                <div>
                  <p class="text-sm font-semibold text-current">Negative Δ</p>
                  <p class="text-xs muted">Token: <code>--negative</code></p>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section class="space-y-6">
          <h2 class="text-lg font-semibold text-current">Δ Tiles in context</h2>
          <div class="delta-tiles">
            <article class="delta-card">
              <div class="flex items-center justify-between">
                <div class="delta-glyph">Δ</div>
                <span class="rounded-full px-3 py-1 text-xs font-semibold" style="background:var(--positive); color:var(--fg)">+8.4%</span>
              </div>
              <div>
                <h3 class="text-xl font-semibold text-current">Savings Momentum</h3>
                <p class="mt-2 text-sm muted">Signature teal lifts the glyph while neutral surfaces keep finance data legible.</p>
              </div>
            </article>
            <article class="delta-card">
              <div class="flex items-center justify-between">
                <div class="delta-glyph">Δ</div>
                <span class="rounded-full px-3 py-1 text-xs font-semibold" style="background:var(--negative); color:#ffffff">−3.1%</span>
              </div>
              <div>
                <h3 class="text-xl font-semibold text-current">Cost Alerts</h3>
                <p class="mt-2 text-sm muted">Accent red locks risk signals in without leaking into the rest of the canvas.</p>
              </div>
            </article>
            <article class="delta-card">
              <div class="flex items-center justify-between">
                <div class="delta-glyph">Δ</div>
                <span class="rounded-full px-3 py-1 text-xs font-semibold" style="background:var(--accent); color:#ffffff">Launch</span>
              </div>
              <div>
                <h3 class="text-xl font-semibold text-current">Executive Callout</h3>
                <p class="mt-2 text-sm muted">Tie hero numbers to <code>--accent</code> so the system recolors instantly with a new brand hue.</p>
              </div>
            </article>
          </div>
        </section>
      </section>
    </main>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const root = document.documentElement;
      const body = document.body;
      const toggle = document.getElementById('themeToggle');
      const thumb = toggle.querySelector('.toggle-thumb');
      const label = document.getElementById('themeLabel');

      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      const stored = localStorage.getItem('delta-theme');
      const initialTheme = stored || (prefersDark ? 'dark' : 'light');
      let persistTheme = stored !== null;

      function baseApply(theme, options = {}) {
        const remember = options.remember ?? false;
        root.setAttribute('data-theme', theme);
        root.classList.toggle('dark', theme === 'dark');
        body.style.background = getComputedStyle(root).getPropertyValue('--bg');
        body.style.color = getComputedStyle(root).getPropertyValue('--fg');
        label.textContent = theme === 'dark' ? 'Signature Δ palette' : 'Neutral framework';
        toggle.setAttribute('aria-pressed', theme === 'dark');
        thumb.style.transform = theme === 'dark' ? 'translateX(2.5rem)' : 'translateX(0)';
        if (remember || persistTheme) {
          localStorage.setItem('delta-theme', theme);
          persistTheme = true;
        }
      }

      window.apply = baseApply;

      const meta = document.getElementById('themeColor');
      const setThemeColor = (theme) => meta.setAttribute('content', theme === 'dark' ? '#0b0f19' : '#ffffff');
      const originalApply = window.apply;
      const _apply = (theme, options) => {
        originalApply(theme, options);
        setThemeColor(theme);
      };
      window.apply = _apply;

      window.apply(initialTheme, { remember: stored !== null });

      toggle.addEventListener('click', () => {
        const next = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
        window.apply(next, { remember: true });
      });

      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (event) => {
        if (!localStorage.getItem('delta-theme')) {
          window.apply(event.matches ? 'dark' : 'light');
        }
      });
    });
  </script>
</body>
</html>
