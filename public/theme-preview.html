<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta id="themeColor" name="theme-color" content="#ffffff" />
  <title>Theme Preview · Tokens + Toggle</title>
  <script src="https://cdn.tailwindcss.com?plugins=forms,typography&v=3.4.1"></script>
  <style>
    :root{ color-scheme: light dark; --bg:#ffffff; --fg:#0b1324 }
    html[data-theme="light"] {
      --bg:#ffffff;
      --fg:#0b1324;
      --surface:#f5f7ff;
      --muted:#5c6b8a;
      --ring:#2563eb;
      --card:#ffffff;
      --accent:#2563eb;
      --accent-contrast:#ffffff;
      --border:#d6def5;
      --shadow:0 18px 50px -20px rgba(37,99,235,0.35);
    }
    html[data-theme="dark"]  {
      --bg:#0b0f19;
      --fg:#f8fafc;
      --surface:#12172a;
      --muted:#94a3b8;
      --ring:#60a5fa;
      --card:#141b2f;
      --accent:#60a5fa;
      --accent-contrast:#0b111f;
      --border:#1e293b;
      --shadow:0 18px 50px -24px rgba(15,118,110,0.45);
    }
    body {
      background: var(--bg);
      color: var(--fg);
    }
    .focus-ring:focus-visible {
      outline:2px solid var(--ring);
      outline-offset:2px;
    }
  </style>
</head>
<body class="min-h-screen font-sans antialiased transition-colors duration-300" style="font-family: 'Inter', system-ui, sans-serif;">
  <div class="mx-auto flex min-h-screen max-w-5xl flex-col gap-16 px-6 py-16">
    <header class="rounded-3xl border px-8 py-12 shadow-xl transition-all" style="background: var(--card); border-color: var(--border); box-shadow: var(--shadow);">
      <div class="flex flex-wrap items-center justify-between gap-6">
        <div>
          <p class="text-sm uppercase tracking-[0.32em] text-slate-400">Palette Relay</p>
          <h1 class="mt-3 text-3xl font-semibold">Tokens + Toggle</h1>
          <p class="mt-3 max-w-xl text-base text-slate-500" style="color: var(--muted);">Preview semantic tokens for light and dark themes. Swap palettes, validate contrast, and mirror what native UI controls expect.</p>
        </div>
        <div class="flex items-center gap-3">
          <span id="theme-label" class="text-sm font-medium" aria-live="polite">Theme: Light</span>
          <button id="theme-toggle" type="button" class="focus-ring rounded-full px-5 py-2 text-sm font-semibold transition" style="background: var(--accent); color: var(--accent-contrast);">Switch</button>
        </div>
      </div>
    </header>

    <section class="grid gap-8 md:grid-cols-2">
      <article class="rounded-2xl border p-8 transition-all" style="background: var(--card); border-color: var(--border); box-shadow: var(--shadow);">
        <h2 class="text-xl font-semibold">Form Preview</h2>
        <p class="mt-2 text-sm" style="color: var(--muted);">Tailwind forms plugin is active for parity with product surfaces.</p>
        <form class="mt-6 space-y-4">
          <div>
            <label class="block text-sm font-medium" for="email">Email</label>
            <input id="email" type="email" placeholder="cici@relay" class="mt-1 w-full rounded-lg border bg-transparent px-3 py-2 text-sm shadow-sm transition" style="border-color: var(--border);" />
          </div>
          <div>
            <label class="block text-sm font-medium" for="role">Role</label>
            <select id="role" class="mt-1 w-full rounded-lg border bg-transparent px-3 py-2 text-sm" style="border-color: var(--border);">
              <option>Stabilizer</option>
              <option>Router</option>
              <option>Oracle</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium" for="notes">Notes</label>
            <textarea id="notes" rows="4" placeholder="Sovereign remit…" class="mt-1 w-full rounded-lg border bg-transparent px-3 py-2 text-sm" style="border-color: var(--border);"></textarea>
          </div>
          <button type="submit" class="focus-ring rounded-lg px-4 py-2 text-sm font-semibold transition" style="background: var(--accent); color: var(--accent-contrast);">Submit</button>
        </form>
      </article>

      <article class="prose prose-slate max-w-none rounded-2xl border p-8 transition-all dark:prose-invert" style="background: var(--card); border-color: var(--border); box-shadow: var(--shadow);">
        <h2>Typography Preview</h2>
        <p>The typography plugin is pinned so documentation and rituals preview with the same baseline styles as production.</p>
        <h3>Invocation Notes</h3>
        <ul>
          <li>Tokens remain semantic—swap only the HEX maps per theme.</li>
          <li>Fallback CSS variables ensure rendering before hydration.</li>
          <li>Dynamic <code>theme-color</code> keeps mobile chrome aligned.</li>
        </ul>
        <blockquote>
          Palette swap tip: adjust the semantic tokens, not inline colors. Components will pick up changes automatically.
        </blockquote>
      </article>
    </section>

    <section class="rounded-2xl border p-8 transition-all" style="background: var(--card); border-color: var(--border); box-shadow: var(--shadow);">
      <h2 class="text-xl font-semibold">Token Table</h2>
      <p class="mt-2 text-sm" style="color: var(--muted);">Inspect resolved values for the active theme.</p>
      <table class="mt-6 w-full table-auto text-sm">
        <thead class="text-left">
          <tr style="color: var(--muted);">
            <th class="pb-3">Token</th>
            <th class="pb-3">Value</th>
          </tr>
        </thead>
        <tbody id="token-table" class="divide-y" style="border-color: var(--border);"></tbody>
      </table>
    </section>
  </div>

  <script>
    const meta = document.getElementById('themeColor');
    const label = document.getElementById('theme-label');
    const table = document.getElementById('token-table');
    const storageKey = 'theme-preview-theme';

    const tokens = {
      light: {
        '--bg': '#ffffff',
        '--fg': '#0b1324',
        '--surface': '#f5f7ff',
        '--muted': '#5c6b8a',
        '--ring': '#2563eb',
        '--card': '#ffffff',
        '--accent': '#2563eb',
        '--accent-contrast': '#ffffff',
        '--border': '#d6def5',
        '--shadow': '0 18px 50px -20px rgba(37,99,235,0.35)'
      },
      dark: {
        '--bg': '#0b0f19',
        '--fg': '#f8fafc',
        '--surface': '#12172a',
        '--muted': '#94a3b8',
        '--ring': '#60a5fa',
        '--card': '#141b2f',
        '--accent': '#60a5fa',
        '--accent-contrast': '#0b111f',
        '--border': '#1e293b',
        '--shadow': '0 18px 50px -24px rgba(15,118,110,0.45)'
      }
    };

    function renderTable(theme) {
      table.innerHTML = '';
      Object.entries(tokens[theme]).forEach(([name, value]) => {
        const row = document.createElement('tr');
        row.innerHTML = `<td class="py-2 pr-4 font-medium">${name}</td><td class="py-2 font-mono">${value}</td>`;
        table.appendChild(row);
      });
    }

    function apply(theme) {
      const next = tokens[theme] ? theme : 'light';
      const root = document.documentElement;
      root.dataset.theme = next;
      Object.entries(tokens[next]).forEach(([token, value]) => {
        root.style.setProperty(token, value);
      });
      label.textContent = `Theme: ${next.charAt(0).toUpperCase()}${next.slice(1)}`;
      localStorage.setItem(storageKey, next);
      renderTable(next);
    }

    const setThemeColor = t => meta.setAttribute('content', t === 'dark' ? '#0b0f19' : '#ffffff');
    const _apply = theme => { apply(theme); setThemeColor(theme); };

    document.getElementById('theme-toggle').addEventListener('click', () => {
      const current = document.documentElement.dataset.theme || 'light';
      const next = current === 'light' ? 'dark' : 'light';
      _apply(next);
    });

    const saved = localStorage.getItem(storageKey);
    _apply(saved || (matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'));
  </script>
</body>
</html>
